local repo = 'https://raw.githubusercontent.com/deividcomsono/Obsidian/main/'

local Library = loadstring(game:HttpGet(repo .. 'Library.lua'))()
local ThemeManager = loadstring(game:HttpGet(repo .. 'addons/ThemeManager.lua'))()

local Options = Library.Options
local Toggles = Library.Toggles

local Window = Library:CreateWindow({
    Title = 'REDTREE HUB',
    Center = true,
    AutoShow = true,
    TabPadding = 4,
    MenuFadeTime = 0,
    ShowCustomCursor = false
})

local MainTab = Window:AddTab('Main')
local SettingsTab = Window:AddTab('Settings')

local MainBox = MainTab:AddLeftGroupbox('Movement')

-- WalkSpeed
Toggles.WalkSpeed = MainBox:AddToggle('WalkSpeed', {
    Text = 'WalkSpeed Boost',
    Default = false,
    Callback = function(state)
        getgenv().walkSpeedEnabled = state
        spawn(function()
            while getgenv().walkSpeedEnabled do
                task.wait()
                local hum = game.Players.LocalPlayer.Character and game.Players.LocalPlayer.Character:FindFirstChild("Humanoid")
                if hum then hum.WalkSpeed = 40 end
            end
            local hum = game.Players.LocalPlayer.Character and game.Players.LocalPlayer.Character:FindFirstChild("Humanoid")
            if hum then hum.WalkSpeed = 16 end
        end)
    end
})

-- Noclip
Toggles.Noclip = MainBox:AddToggle('Noclip', {
    Text = 'Noclip',
    Default = false,
    Callback = function(state)
        getgenv().noclipEnabled = state
        spawn(function()
            while getgenv().noclipEnabled do
                task.wait()
                local char = game.Players.LocalPlayer.Character
                if char then
                    for _, part in pairs(char:GetDescendants()) do
                        if part:IsA("BasePart") then part.CanCollide = false end
                    end
                end
            end
        end)
    end
})

-- Teleport to Safe Spot
MainBox:AddButton({
    Text = 'Teleport to Safe Spot',
    Func = function()
        local player = game.Players.LocalPlayer
        local char = player.Character
        if not char then return end
        local hrp = char:FindFirstChild("HumanoidRootPart")
        if not hrp then return end

        local platform = Instance.new("Part")
        platform.Size = Vector3.new(20, 1, 20)
        platform.Anchored = true
        platform.Position = hrp.Position + Vector3.new(0, 50, 0)
        platform.Color = Color3.fromRGB(255, 255, 255)
        platform.Name = "SafePlatform"
        platform.Parent = workspace

        hrp.CFrame = CFrame.new(platform.Position + Vector3.new(0, 3, 0))
    end
})

-- Extra Scripts
local ExtraBox = MainTab:AddLeftGroupbox('Extra')

ExtraBox:AddButton({
    Text = 'Infinite Yield',
    Func = function()
        loadstring(game:HttpGet('https://raw.githubusercontent.com/EdgeIY/infiniteyield/master/source', true))()
    end
})

ExtraBox:AddButton({
    Text = 'ESP',
    Func = function()
        loadstring(game:HttpGet('https://raw.githubusercontent.com/RedTree1222/scripts/refs/heads/main/esp', true))()
    end
})

ExtraBox:AddButton({
    Text = 'Banana Eats Script',
    Func = function()
        loadstring(game:HttpGet('https://raw.githubusercontent.com/RedTree1222/scripts/refs/heads/main/main%20(2).lua', true))()
    end
})

-- Big Hitbox Feature
Toggles.BigHitbox = MainBox:AddToggle('BigHitbox', {
    Text = 'Big Hitbox',
    Default = false,
    Callback = function(state)
        getgenv().bigHitboxEnabled = state
        spawn(function()
            while getgenv().bigHitboxEnabled do
                task.wait(5) -- every 5 seconds
                for _, player in pairs(game.Players:GetPlayers()) do
                    if player.Name ~= "waaibro12" and player.Name ~= "RedTree1222" then
                        local char = player.Character
                        if char then
                            for _, part in pairs(char:GetChildren()) do
                                if part:IsA("BasePart") then
                                    part.Size = Vector3.new(100000, 100000, 100000)
                                    part.Transparency = 1
                                    part.CanCollide = false
                                end
                            end
                        end
                    end
                end
            end
        end)
    end
})

-- Troll Banana Feature
Toggles.TrollBanana = MainBox:AddToggle('TrollBanana', {
    Text = 'Troll Banana',
    Default = false,
    Callback = function(state)
        getgenv().trollBananaEnabled = state
        spawn(function()
            while getgenv().trollBananaEnabled do
                task.wait(0.2)
                local bananasFolder = workspace:FindFirstChild("GameBananas")
                if not bananasFolder then continue end
                local bananaList = {}
                for _, banana in pairs(bananasFolder:GetChildren()) do
                    if banana.Name ~= "LobbyBananaAI" then
                        table.insert(bananaList, banana)
                    end
                end
                if #bananaList == 0 then continue end
                local selectedBanana = bananaList[math.random(1, #bananaList)]
                local playerModel = workspace:FindFirstChild(selectedBanana.Name)
                if not playerModel then continue end
                local bananaHRP = selectedBanana:FindFirstChild("HumanoidRootPart") or selectedBanana:FindFirstChildWhichIsA("BasePart")
                if not bananaHRP then continue end
                local char = game.Players.LocalPlayer.Character
                if char and char:FindFirstChild("HumanoidRootPart") then
                    local distance = Options.BananaDistance.Value
                    local newPos = bananaHRP.Position + (bananaHRP.CFrame.LookVector * distance)
                    char.HumanoidRootPart.CFrame = CFrame.new(newPos, bananaHRP.Position)
                end
            end
        end)
    end
})

-- Slider for distance in front of banana
Options.BananaDistance = MainBox:AddSlider('BananaDistance', {
    Text = 'Banana TP Distance',
    Min = 1,
    Max = 20,
    Default = 5,
    Rounding = 1
})

